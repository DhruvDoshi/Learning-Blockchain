<!-- udacimak v1.2.1 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Node.js Client and Server Features</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>Planning a Web Service</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Interview What&#x27;s a Web Service.html">01. Interview: What&#x27;s a Web Service?</a>
    </li>
    <li class="">
      <a href="02. Lesson Overview.html">02. Lesson Overview</a>
    </li>
    <li class="">
      <a href="03. What is a Web Service.html">03. What is a Web Service?</a>
    </li>
    <li class="">
      <a href="04. Web Service with Blockchain Considerations.html">04. Web Service with Blockchain Considerations</a>
    </li>
    <li class="">
      <a href="05. Planning Web Services with Our Private Blockchain.html">05. Planning Web Services with Our Private Blockchain</a>
    </li>
    <li class="">
      <a href="06. Web Services with Node.js.html">06. Web Services with Node.js</a>
    </li>
    <li class="">
      <a href="07. Node.js Intro.html">07. Node.js Intro</a>
    </li>
    <li class="">
      <a href="08. Node.js Setup.html">08. Node.js Setup</a>
    </li>
    <li class="">
      <a href="09. Node.js Components.html">09. Node.js Components</a>
    </li>
    <li class="">
      <a href="10. Node.js Client and Server Features.html">10. Node.js Client and Server Features</a>
    </li>
    <li class="">
      <a href="11. Practice Client-Server Features.html">11. Practice Client-Server Features</a>
    </li>
    <li class="">
      <a href="12. Mock Data Set.html">12. Mock Data Set</a>
    </li>
    <li class="">
      <a href="13. Testing endpoints.html">13. Testing endpoints</a>
    </li>
    <li class="">
      <a href="14. Lesson Summary.html">14. Lesson Summary</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">10. Node.js Client and Server Features</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3></h3>
  <div>
  <h1 id="nodejs-client-and-server-features">Node.js Client and Server Features</h1>
<p>We are going to talk at a high-level about the client and server endpoints we can expect when building out a blockchain integrated web service. </p>
<h3 id="purpose-of-this-topic">Purpose of this topic</h3>
<p>The purpose of this topic is to showcase that Node.js Client and Server features for blockchain web service integration is not too different from web service with other data storage methods (e.g. file storage, database) you've worked with before. </p>
<p>We will show you code in raw Node.js (no frameworks) to help you get a clear sense of the mechanics.</p>
<p>For our project, you'll be given the a front-end (client) portion; however, here's how a simplified client-server request and responding to a blockchain web service: </p>
<ul>
<li>Client: Web front-end<ul>
<li>Consume and interact with backend services</li>
<li>Endpoints</li>
<li>Get - Block by ID</li>
<li>Post - New block </li></ul></li>
<li>Server: Backend RESTful service<ul>
<li>Server client side requests</li>
<li>Endpoints</li>
<li>Get - Block by ID</li>
<li>Post - New block </li></ul></li>
</ul>
<p>Now, before we see an example of a web service involving blockchain, it's helpful to review how we would handle a typical Node HTTP request.</p>
<h3 id="node-server-side-http-reading-from-a-file-no-blockchain-data-yet">Node Server-Side HTTP Reading from a File (no blockchain data yet)</h3>
<p>First, let’s take a look at a simple code snippet involving a web server not related to blockchain.<br />
It’s a Node.js web service using file and http libraries that obtains data from a request which can be used to construct output for a response.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <pre><code class="javascript language-javascript">// Code snippet from https://www.w3schools.com/nodejs/nodejs_http.asp
// Http library
const http = require('http');
// File service library
const fs = require('fs');
// Http port
const port = 3000;
// Filename for file service to load
const filename = "index.html";
// Configure web service
const app = http.createServer(function (request, response){
  response.writeHead(200, {"Content-Type": "text/html"});
  response.end(fs.readFileSync(__dirname + "/" + filename));
});
// Notify console
console.log("Web Server started on port 3000\nhttp://localhost:"+port);
// Start server with http port
app.listen(port);</code></pre>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h4 id="code-explanation">Code Explanation</h4>
<ul>
<li>Instantiate an HTTP server with a request handler function, and have it listen on a port.</li>
<li>Get headers, URL, method and body data from request objects.</li>
<li>Make routing decisions based on URL and/or other data in request objects.</li>
<li>Send headers, HTTP status codes and body data via response objects.</li>
<li>Pipe data from request objects and to response objects.</li>
<li>Handle stream errors in both the request and response streams.</li>
</ul>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>While it is simple, the point I want to make is that the hurdles with using just raw Node.js (i.e. not utilizing and frameworks or third-party libraries) just to handle HTTP means configuring your project to support methods already set for RESTful solutions.</p>
<p>Even in this simple example, there's definitely room for improvement that RESTful frameworks such as Express.js, Sails.js, and Hapi.js can provide. These frameworks are tools that help build high-speed, real-time, end-to-end applications, without using third party web server.</p>
<p>This will set the stage for the next lesson where we dive deeper into understanding RESTful frameworks we can plug into Node.js.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h3 id="node-server-side-using-blockchain-mock-data">Node Server Side Using Blockchain Mock Data</h3>
<p>Now, instead of reading from a file as we did above, let’s redo the call using mock data with block variables to respond to a GET request. </p>
<pre><code class="javascript language-javascript">// Http library
const http = require('http');
// Http port
const port = 8080;
// Configure web service
const app = http.createServer(function (request, response){
response.writeHead(200, {"Content-Type": "application/json"});
let block = {"height":"0","body":"123"};
response.write(JSON.stringify(block));
response.end();
});
// Notify console
console.log("Web Server started on port 3000\nhttp://localhost:"+port);
// Start server with http port
app.listen(port);</code></pre>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>Notice that many of the HTTP requests are similar to what you're familiar with already with minor changes to where we are writing the data.</p>
<p>Again, while this was a very simplified use case, there’s a lot of room for improvement.  </p>
<h3 id="conclusion">Conclusion</h3>
<p>This sets the stage for what will be covered later in this course - using web application frameworks such as Hapi.js and Express.js that will provide a convenient API to build HTTP servers in Node as well as third-party libraries for other blockchain platform interactions.</p>
<p>You will get a chance to interact with all this in much more depth as we move forward. For now, keep in mind the principle that integrating the blockchain with web services is similar to web service interactions you've done before. </p>
</div>

</div>
<div class="divider"></div>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://github.com/udacimak/udacimak#readme" target="_blank">udacimak v1.2.1</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });
    });
  </script>
</body>

</html>
