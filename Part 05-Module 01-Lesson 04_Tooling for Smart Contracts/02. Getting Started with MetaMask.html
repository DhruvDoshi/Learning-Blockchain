<!-- udacimak v1.2.1 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Getting Started with MetaMask</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>Tooling for Smart Contracts</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Lesson Introduction.html">01. Lesson Introduction</a>
    </li>
    <li class="">
      <a href="02. Getting Started with MetaMask.html">02. Getting Started with MetaMask</a>
    </li>
    <li class="">
      <a href="03. Unit tests in Javascript and Solidity with Truffle.html">03. Unit tests in Javascript and Solidity with Truffle</a>
    </li>
    <li class="">
      <a href="04. Ethereum Improvement Proposals and Standards.html">04. Ethereum Improvement Proposals and Standards</a>
    </li>
    <li class="">
      <a href="05. Star Notary as ERC-721.html">05. Star Notary as ERC-721</a>
    </li>
    <li class="">
      <a href="06. Transform Star Notary into a Non-Fungible Token.html">06. Transform Star Notary into a Non-Fungible Token</a>
    </li>
    <li class="">
      <a href="07. Getting Started with OpenZeppelin.html">07. Getting Started with OpenZeppelin</a>
    </li>
    <li class="">
      <a href="08. Infura.html">08. Infura</a>
    </li>
    <li class="">
      <a href="09. Lesson Recap.html">09. Lesson Recap</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">02. Getting Started with MetaMask</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="-getting-started-with-metamask"># Getting Started with MetaMask</h2>
<p>The first tool we will go over is <a href="https://metamask.io/" target="_blank">MetaMark</a>. Metamask allows the users on a website to do actions using their own wallets without providing their private keys for us to do actions on their behalf. It also gives users more transparency on what transactions are being made based on their interaction with the website. </p>
<p>Let's see how we can use Metamask to improve user experience of the star notary webpage. </p>
<p>We'll also explore with Elena how smart contracts have helped change the developer ecosystem.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>C4L3 02 SC Getting Started With Metamask (Slower)</p></h3>
  <video controls>
  <source src="02. C4L3 02 SC Getting Started With Metamask (Slower)-UHIkIRuTrH8.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="02. C4L3 02 SC Getting Started With Metamask (Slower)-UHIkIRuTrH8.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="-resources">## Resources</h2>
<p><a href="https://metamask.io/" target="_blank">MetaMask website</a><br />
<br><a href="http://remix.ethereum.org/" target="_blank">Remix</a><br />
<br><a href="https://www.npmjs.com/package/http-server" target="_blank">http-server</a></p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="-code"># Code</h2>
<p>Summary of code changes made to the <code>index.html</code> file:</p>
<ul>
<li>Allow Metamask to inject its own web3.js object</li>
<li>Modify function claimButtonClicked() to replace the logic of setting a default account by asking the web3 object what accounts are available and take the top one</li>
</ul>
<pre><code class="html language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
        &lt;title&gt;Star Notary&lt;/title&gt;
        &lt;link rel="stylesheet" type="text/css" href="style.css"&gt;

        &lt;script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"&gt;&lt;/script&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;div class="container"&gt;
            &lt;h1&gt;Star Notary&lt;/h1&gt;

            &lt;div class="row"&gt;
                &lt;label class="bold"&gt;Star Name:&lt;/label&gt;
                &lt;label id="star-name"&gt;&lt;/label&gt;
            &lt;/div&gt;

            &lt;div class="row"&gt;
                &lt;label class="bold"&gt;Star Owner:&lt;/label&gt;
                &lt;label id="star-owner"&gt;&lt;/label&gt;
            &lt;/div&gt;

            &lt;button id="claim-button" onclick="claimButtonClicked()"&gt;Claim Star&lt;/button&gt;
        &lt;/div&gt;

        &lt;script&gt;    

            if(typeof web3 != 'undefined') { 
                web3 = new Web3(web3.currentProvider) // what Metamask injected 
            } else {
                // Instantiate and set Ganache as your provider
                web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
            }
            // The default (top) wallet account from a list of test accounts 
            web3.eth.defaultAccount = web3.eth.accounts[0];
            // The interface definition for your smart contract (the ABI) 
            var StarNotary = web3.eth.contract(
                [
                    {
                        "constant": false,
                        "inputs": [],
                        "name": "claimStar",
                        "outputs": [],
                        "payable": false,
                        "stateMutability": "nonpayable",
                        "type": "function"
                    },
                    {
                        "anonymous": false,
                        "inputs": [
                            {
                                "indexed": false,
                                "name": "owner",
                                "type": "address"
                            }
                        ],
                        "name": "starClaimed",
                        "type": "event"
                    },
                    {
                        "inputs": [],
                        "payable": false,
                        "stateMutability": "nonpayable",
                        "type": "constructor"
                    },
                    {
                        "constant": true,
                        "inputs": [],
                        "name": "starName",
                        "outputs": [
                            {
                                "name": "",
                                "type": "string"
                            }
                        ],
                        "payable": false,
                        "stateMutability": "view",
                        "type": "function"
                    },
                    {
                        "constant": true,
                        "inputs": [],
                        "name": "starOwner",
                        "outputs": [
                            {
                                "name": "",
                                "type": "address"
                            }
                        ],
                        "payable": false,
                        "stateMutability": "view",
                        "type": "function"
                    }
                ]
            );
            // Grab the contract at specified deployed address with the interface defined by the ABI
            var starNotary = StarNotary.at('0x8040086095e9bc41535094bf03eae1f6178b5260');

            // Get and display star name
            starNotary.starName(function (error, result) {
                if (!error) {
                    document.getElementById('star-name').innerText = result
                } else { 
                    console.log(error);
                }
            });
            // Get and display star owner
            starNotary.starOwner(function (error, result) {
                if (!error) {
                    document.getElementById('star-owner').innerText = result
                } else { 
                    console.log(error);
                }
            });
            // Enable claim button being clicked
            function claimButtonClicked() { 
                web3.eth.getAccounts(function(error, accounts) { 
                    if (error) { 
                        console.log(error)
                        return
                    }
                    var account = accounts[0]
                    starNotary.claimStar(function (error, result) {
                        if (!error) {
                            var starClaimedEvent = starNotary.starClaimed({from: account});
                            starClaimedEvent.watch(function(error, result) {
                                if (!error) {
                                    location.reload();
                                } else {
                                    console.log('watching for star claimed event is failing');
                                }
                            });
                        } else { 
                            console.log(error);
                        }
                    });

                })
            }
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>

</div>
<div class="divider"></div>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://github.com/udacimak/udacimak#readme" target="_blank">udacimak v1.2.1</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });
    });
  </script>
</body>

</html>
