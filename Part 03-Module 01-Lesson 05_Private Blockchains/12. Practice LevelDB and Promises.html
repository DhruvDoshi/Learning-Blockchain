<!-- udacimak v1.2.1 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Practice LevelDB and Promises</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>Private Blockchains</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Lesson Introduction.html">01. Lesson Introduction</a>
    </li>
    <li class="">
      <a href="02. Public and Private Blockchains.html">02. Public and Private Blockchains</a>
    </li>
    <li class="">
      <a href="03. Public and Private Blockchain Interaction.html">03. Public and Private Blockchain Interaction</a>
    </li>
    <li class="">
      <a href="04. Build a Simple Private Blockchain.html">04. Build a Simple Private Blockchain</a>
    </li>
    <li class="">
      <a href="05. Working with Your Workspace.html">05. Working with Your Workspace</a>
    </li>
    <li class="">
      <a href="06. Block Data Model.html">06. Block Data Model</a>
    </li>
    <li class="">
      <a href="07. Create New Blocks.html">07. Create New Blocks</a>
    </li>
    <li class="">
      <a href="08. Store Blocks.html">08. Store Blocks</a>
    </li>
    <li class="">
      <a href="09. Link Blocks.html">09. Link Blocks</a>
    </li>
    <li class="">
      <a href="10. Block Height and Timestamp.html">10. Block Height and Timestamp</a>
    </li>
    <li class="">
      <a href="11. LevelDB to Persist Data.html">11. LevelDB to Persist Data</a>
    </li>
    <li class="">
      <a href="12. Practice LevelDB and Promises.html">12. Practice LevelDB and Promises</a>
    </li>
    <li class="">
      <a href="13. Lesson Recap.html">13. Lesson Recap</a>
    </li>
    <li class="">
      <a href="14. Project Prep.html">14. Project Prep</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">12. Practice LevelDB and Promises</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3></h3>
  <div>
  <h1 id="lets-do-some-coding-practice">Let's do some Coding Practice</h1>
<p>In the previous concept, you explored the Third Party Library <strong>LevelDB</strong> as an option to persist a blockchain. This will be very important for your next project. Let's do some exercises to incorporate <strong>Promises</strong> with <strong>LevelDB</strong>.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="steps-to-follow">Steps to follow</h2>
<blockquote>
  <table>
  <thead>
  <tr>
  <th id="**step_1**"><strong>Step 1</strong></th>
  <th id="analyze_levelsandbox.js_methods">Analyze LevelSandbox.js methods</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><strong>Step 2</strong></td>
  <td>Let's talk about the <code>getBlocksCount()</code> algorithm</td>
  </tr>
  <tr>
  <td><strong>Step 3</strong></td>
  <td>Run the application</td>
  </tr>
  </tbody>
  </table>
</blockquote>
<p>Each step you’ll take to complete this exercise is called out in comments throughout the code. You can find more details and guidance about each of these steps in the text provided below the code.</p>
<p>Let’s get started!</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="step-1-analyze-levelsandboxjs-methods">Step. 1. Analyze LevelSandbox.js methods</h2>
<p>In the previous lesson, you saw us implement some methods from LevelDB using <strong><em>callbacks</em></strong>. In this exercise, we will be using Promises. <strong>Promises</strong> allow us to work with the database in asynchronous way. It is very important to understand how to transform methods to return Promises.</p>
<p>The fist method implemented is <code>getLevelDBData(key)</code>. This method allow you to get the value that corresponds to a certain key.</p>
<p>The second method implemented is <code>addLevelDBData(key, value)</code>. This method allow you to insert data into the LevelDB.</p>
<p>The third method <code>getBlocksCount()</code> is the method that you need to implement. This is a very useful method because it will help you get the number of objects you added to your DB. This method can be used to calculate the <code>height</code> in your future project.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="step-2-lets-talk-about-the-getblockscount-algorithm">Step 2. Let's talk about the <code>getBlocksCount()</code> algorithm</h2>
<p>This is the method that we need to implement, and it will be very useful for your next project. The simple way to describe this functionality is to find a method that allows us to count all the <code>key</code>s inserted in <strong>LevelDB</strong>, right?</p>
<p>This method exists in <strong><em>LevelDB</em></strong> and it is <code>createReadStream()</code>.</p>
<pre><code>db.createReadStream()
.on('data', function (data) {
      // Count each object inserted
 })
.on('error', function (err) {
    // reject with error
 })
 .on('close', function () {
    //resolve with the count value
});</code></pre>
<p>Read more about this in the documentation for <a href="https://github.com/Level/levelup/blob/master/README.md#dbcreatereadstreamoptions" target="_blank">LevelDB</a>.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="step-3-run-the-application">Step 3. Run the application</h2>
<p>In the Workspace below, open the <code>app.js</code> file. In there, you have code that allows the application to insert objects in the database. </p>
<p>To run the application:</p>
<ul>
<li>Open the terminal</li>
<li>Move to the project folder <code>cd Project</code></li>
<li>Write in the console <code>node app.js</code></li>
</ul>
<p><strong><em>Note</em></strong>: If you need to run your application several times, remember to delete the folder <code>chaindata</code> every time.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="leveldb-with-promises-workspace">LevelDB with Promises Workspace</h2>
<p><strong>Note</strong>: If you want to download the boilerplate code you can clone it from this <a href="https://github.com/udacity/nd1309_leveldb/tree/master" target="_blank">Github Repository</a></p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div class="jumbotron">
  <h3>Workspace</h3>

  <p class="lead">This section contains either a workspace (it can be a <a href="http://jupyter.org/" target="_blank">Jupyter
      Notebook</a> workspace or an online code editor work space, etc.) and it cannot be automatically downloaded to be
    generated here. Please access the classroom with your account and manually download the workspace to your local
    machine. Note that for some courses, Udacity upload the workspace files onto <a href="https://github.com/udacity"
      target="_blank">https://github.com/udacity</a>, so you may be able to download them there.</p>

  <h4>Workspace Information:</h4>

  <ul>
    <li><strong>Default file path:</strong> </li>
    <li><strong>Workspace type:</strong> generic</li>
    <li>
      <strong>Opened files (when workspace is loaded):</strong>
      n/a
    </li>

  </ul>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="quizzes">Quizzes</h2>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Select the correct answer.</p></h3>
  <div>
  <form>
    <fieldset>
      <legend><p>What is the id for your next object?</p></legend>
    </fieldset>

      <div>
        <input type="radio" value="a1538417473073" name="729416" id="a1538417473073">
        <label for="a1538417473073"><p>10</p></label>
      </div>
      <div>
        <input type="radio" value="a1538417532661" name="729416" id="a1538417532661">
        <label for="a1538417532661"><p>9</p></label>
      </div>
      <div>
        <input type="radio" value="a1538417536128" name="729416" id="a1538417536128">
        <label for="a1538417536128"><p>Other</p></label>
      </div>
  </form>

  <details>
    <summary><strong>SOLUTION:</strong></summary>
    10
  </details>
</div>

</div>
<div class="divider"></div>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://github.com/udacimak/udacimak#readme" target="_blank">udacimak v1.2.1</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });
    });
  </script>
</body>

</html>
